(this["webpackJsonplibrary-management"]=this["webpackJsonplibrary-management"]||[]).push([[0],{58:function(e,a,t){e.exports=t(82)},63:function(e,a,t){},65:function(e,a,t){},66:function(e,a,t){e.exports=t.p+"static/media/loading.81c29bc5.gif"},82:function(e,a,t){"use strict";t.r(a);var n=t(1),r=t.n(n),o=t(25),l=t.n(o),c=(t(63),t(42)),i=t(28),s=t.n(i),u=t(38),m=t(16),d=t(17),h=t(20),b=t(18),p=t(21),v=(t(65),t(22)),g={books:"/book",cart:"/cart",login:"/login"},k=function(e){function a(){return Object(m.a)(this,a),Object(h.a)(this,Object(b.a)(a).apply(this,arguments))}return Object(p.a)(a,e),Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("img",{src:t(66),alt:"loading"}))}}]),a}(r.a.Component),f=t(36),E=t(37),y=t(53),C=t.n(y),O=t(30),j=t.n(O),w=t(34),B=t(95),S=t(96),x=t(97),L=t(98),A=t(99),T=function(e){var a=e.id,t=e.title,n=e.author,o=(e.totalBooks,e.year),l=e.availability,c=e.image,i=e.book,s=e.handleAddToCart,u=e.handleRemoveFromCart,m=e.cart,d=e.availableDate;return r.a.createElement(B.a,{id:a,disabled:"no"==l},r.a.createElement(S.a,{src:c,alt:"loading"}),r.a.createElement(x.a,null,r.a.createElement("h3",null,t),r.a.createElement(L.a,null,"Author : ",n),r.a.createElement(L.a,null,"Year : ",o),r.a.createElement(A.a,null,r.a.createElement("strong",null,"yes"==l?r.a.createElement(w.a,{pill:!0,variant:"success",className:"badge-size"},"Available"):r.a.createElement(w.a,{pill:!0,variant:"danger"},"Unavailable"),"no"==l?r.a.createElement(w.a,{pill:!0,variant:"danger",className:"badge-size"},"Available on : ".concat(d)):"")),m.find((function(e){return e.id===a}))?r.a.createElement("button",{className:"btn btn-danger",onClick:u.bind(void 0,i)},r.a.createElement(j.a,null),"Remove from cart"):r.a.createElement("button",{disabled:"no"==l,className:"btn btn-primary",onClick:s.bind(void 0,i)},r.a.createElement(C.a,null),"Add to cart")))},N=function(e){var a=e.searchType,t=e.placeholderText,n=e.onChange;e.btnType,e.onClick;return console.log(),r.a.createElement("div",{className:"container"},r.a.createElement("input",{className:"form-control",type:a,placeholder:t,"aria-label":"Search",onChange:n}))},D=t(100),F=t(101),R=t(13),P=Object(D.a)((function(e){return{root:{display:"flex",flexDirection:"column"},formControl:{margin:e.spacing(3)},row:{display:"flex",justifyContent:"center"},margin:{margin:e.spacing(2)}}})),z=function(e){var a=e.cart,t=(e.handleRemoveFromCart,P());return r.a.createElement(R.b,{to:{pathname:"/cart"}},r.a.createElement(F.a,{color:a.length>0?"secondary":"primary",max:10,badgeContent:a.length,showZero:!0,className:t.margin},r.a.createElement(f.a,{icon:E.a,size:"3x"})))},Y=function(e){function a(){var e,t;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=Object(h.a)(this,(e=Object(b.a)(a)).call.apply(e,[this].concat(r)))).state={},t.SearchBook=function(e){t.props.handleSearch(e)},t.handleSubmit=function(e){e.preventDefault()},t}return Object(p.a)(a,e),Object(d.a)(a,[{key:"render",value:function(){var e=this.props,a=e.bookList,t=e.cart,o=e.handleRemoveFromCart,l=e.handleAddToCart,c=(e.handleSearch,e.availableDate);return r.a.createElement(n.Fragment,null,r.a.createElement(N,{className:"container",searchType:"search",placeholderText:"Search for Books",onChange:this.SearchBook,btnType:"submit",onClick:this.handleSubmit}),r.a.createElement("h3",null,"List of Books"),a.length?r.a.createElement("div",{className:"container box"},a.map((function(e,a){return r.a.createElement(T,{id:e.id,index:a,title:e.title,totalBooks:e.noOfBooks,author:e.author,year:e.yearOfPublication,availability:e.availability,image:e.image,book:e,cart:t,handleAddToCart:l,handleRemoveFromCart:o,availableDate:c})}))):0==a.length?r.a.createElement("p",null,"No books available in the given name"):r.a.createElement(k,null))}}]),a}(n.Component),M=(t(75),t(107)),U=t(108),G=t(109),J=t(110),W=t(111),H=t(112),I=t(113),Z="https://my-json-server.typicode.com/gsprasanna/json-server",$="/data",q="/users",K=function(e){var a=Z+e;return new Promise((function(e,t){fetch(a).then((function(e){return e.json()})).then((function(a){e(a)})).catch((function(e){t(e)}))}))},Q=t(114),V=t(102),X=t(103),_=t(104),ee=t(106),ae=t(105),te=function(e){var a=e.cart,t=e.handleRemoveFromCart,n=(e.backToBookPage,e.modal),o=e.toggle,l=e.backdrop,c=e.keyboard,i=e.handleCheckOut;return r.a.createElement("div",null,a.length?r.a.createElement(Q.a,{isOpen:n,toggle:o,id:a.id,backdrop:l,size:"lg",keyboard:c},r.a.createElement(V.a,null,r.a.createElement("table",null,r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",null,r.a.createElement("strong",null,"Book Title")),r.a.createElement("td",null,r.a.createElement("strong",null,"Author")),r.a.createElement("td",null,r.a.createElement("strong",null,"Published Year"))),a.map((function(e,n){return r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("img",{className:"thumbnail",src:e.image,alt:"loading"})),r.a.createElement("td",null,r.a.createElement("strong",null,e.title)),r.a.createElement("td",null,r.a.createElement("p",null,e.author)),r.a.createElement("td",null,r.a.createElement("p",null,e.yearOfPublication)),r.a.createElement("td",null,r.a.createElement(X.a,{className:"btn btn-danger",onClick:t.bind(void 0,e,a)},r.a.createElement(j.a,null))))})))),r.a.createElement(_.a,null,r.a.createElement(R.c,{to:g.books},r.a.createElement(X.a,{color:"primary",onClick:i.bind(void 0,a)},"Check out")),r.a.createElement(R.c,{to:g.books},r.a.createElement(X.a,{color:"secondary"},"Cancel"))),r.a.createElement(_.a,null,3==a.length?r.a.createElement(ae.a,{color:"danger"},"You have added the maximum number of books to the cart!"):r.a.createElement(ae.a,{color:"primary"},"still you can add ",3-a.length," books"))):r.a.createElement(Q.a,{isOpen:n,toggle:o,id:a.id,backdrop:l,keyboard:c},r.a.createElement(ee.a,null,"Hi Buddy!"),r.a.createElement(V.a,null,"Please Add the books to the cart!"),r.a.createElement(_.a,null,r.a.createElement(R.c,{to:g.books},r.a.createElement(X.a,{color:"secondary"},"Cancel")))))},ne=function(e){function a(){var e,t;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=Object(h.a)(this,(e=Object(b.a)(a)).call.apply(e,[this].concat(r)))).state={cart:[],modal:!0,backdrop:"static",keyboard:!1},t.toggle=function(){t.setState((function(e){return{modal:!e.modal}}))},t.backToBookPage=function(){},t}return Object(p.a)(a,e),Object(d.a)(a,[{key:"componentDidMount",value:function(){this.setState({cart:this.props.cart})}},{key:"render",value:function(){var e=this.state,a=e.modal,t=e.backdrop,n=e.keyboard;return r.a.createElement(te,{cart:this.props.cart,modal:a,toggle:this.toggle,keyboard:n,handleRemoveFromCart:this.props.handleRemoveFromCart,backToBookPage:this.backToBookPage,backdrop:t,handleCheckOut:this.props.handleCheckOut})}}]),a}(n.Component),re=function(e){function a(){var e,t;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=Object(h.a)(this,(e=Object(b.a)(a)).call.apply(e,[this].concat(r)))).state={bookList:[],setBookList:[],cart:[],isOpen:!1,users:[],bookNextAvailability:""},t.loadUsersData=Object(u.a)(s.a.mark((function e(){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K(q,"GET");case 3:a=e.sent,console.log(a),t.setState({users:a}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),t.loadPostData=Object(u.a)(s.a.mark((function e(){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K($,"GET");case 3:a=e.sent,console.log(a),t.setState({bookList:a,setBookList:a}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),t.toggle=function(){t.setState({isOpen:!t.state.isOpen})},t.handleSearch=function(e){console.log(e.target.value);var a=Object(c.a)(t.state.bookList),n=[];n=""!==e.target.value?a.filter((function(a){a.title.toLowerCase();var t=e.target.value;return a.title.toLowerCase().includes(t.toLowerCase())||a.author.toLowerCase().includes(t.toLowerCase())||a.genre.toLowerCase().includes(t.toLowerCase())||a.yearOfPublication.toString().includes(t.toString())})):t.state.setBookList,t.setState({bookList:n})},t.handleAddToCart=function(e){var a=t.state.cart,n=a.find((function(a){return a.id===e.id}));a.length<3?!n&&e.noOfBooks>0?(e.noOfBooks=e.noOfBooks-1)&&t.setState({cart:[].concat(Object(c.a)(t.state.cart),[e])}):e.noOfBooks="Stock not available":alert("you reached the maximum number of books added to the cart!")},t.handleRemoveFromCart=function(e){var a=t.state.cart.filter((function(a){return a.id!==e.id}));e.noOfBooks=++e.noOfBooks,t.setState({cart:a})},t.handleCheckOut=function(e){var a=t.state.bookList,n=[],r=function(t){n=a.filter((function(a){return a.id===e[t].id?a.availability="no":a.availability}))};for(var o in e)r(o);var l=new Date;l.setDate(l.getDate()+5);var c=l.getDate()+"/"+l.getMonth()+"/"+l.getFullYear();t.setState({bookList:n,cart:[],bookNextAvailability:c})},t}return Object(p.a)(a,e),Object(d.a)(a,[{key:"componentDidMount",value:function(){this.loadPostData(),this.loadUsersData();var e=this.props,a=e.history;"/Library-app-using-react"===e.location.pathname&&a.push(g.books)}},{key:"render",value:function(){var e=this,a=this.state,t=a.cart,n=a.bookList,o=a.isOpen,l=a.bookNextAvailability;return r.a.createElement("div",{className:"App"},r.a.createElement(M.a,{color:"light",light:!0,expand:"md"},r.a.createElement(U.a,{href:"/"},"Smart Library"),r.a.createElement(G.a,{onClick:this.toggle}),r.a.createElement(J.a,{isOpen:o,navbar:!0},r.a.createElement(W.a,{className:"ml-auto",navbar:!0},r.a.createElement(H.a,null,r.a.createElement(I.a,{to:g.cart})),r.a.createElement(H.a,null,r.a.createElement(z,{cart:t,handleRemoveFromCart:this.handleRemoveFromCart},"Cart"))))),r.a.createElement(v.a,{path:g.cart,render:function(){return r.a.createElement(ne,{cart:t,handleRemoveFromCart:e.handleRemoveFromCart,handleCheckOut:e.handleCheckOut})}}),r.a.createElement(v.a,{path:g.books,render:function(){return r.a.createElement(Y,{bookList:n,cart:t,handleAddToCart:e.handleAddToCart,handleRemoveFromCart:e.handleRemoveFromCart,handleSearch:e.handleSearch,availableDate:l})}}))}}]),a}(n.Component),oe=Object(v.e)(re);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(R.a,null,r.a.createElement(oe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[58,1,2]]]);
//# sourceMappingURL=main.f4f9add3.chunk.js.map